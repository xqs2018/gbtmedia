import{d as V,r as s,j as G,i as N,k as R,b as $,c as o,w as l,f as k,e as t,t as r,u as K,o as P,_ as j}from"./index-BYlyECpH.js";import{i as v}from"./index-u3wYLQ4o.js";import{m as H}from"./system-CujKZacu.js";import"./request-xFzgdMuq.js";const E={class:"home-container"},q={class:"card-content"},z={class:"chart-container"},I={class:"stats-info"},J={class:"card-content"},Q={class:"chart-container"},W={class:"stats-info"},X={class:"card-content"},Y={class:"chart-container"},Z={class:"stats-info"},tt={class:"card-content"},at={class:"chart-container"},et={class:"stats-info"},st=V({__name:"HomeView",setup(ot){K();const U=s(0),S=s(0),L=s(0),A=s(0),B=s(0),C=s(0),D=s(0),O=s(0),f=s([]),y=s([]),_=s([]),m=s([]),h=s(),g=s(),x=s(),b=s();let d=null,c=null,u=null,p=null;const M=()=>{h.value&&(d=v(h.value),d.setOption({tooltip:{trigger:"axis",formatter:"{b}<br />Usage: {c}%"},grid:{left:"3%",right:"4%",bottom:"20%",top:"15%",containLabel:!0},xAxis:{type:"category",data:[],axisLabel:{interval:1,rotate:0}},yAxis:{type:"value",min:0,max:100,interval:20,axisLabel:{formatter:"{value}%"}},series:[{name:"CPU Usage",type:"line",data:[],smooth:!0,areaStyle:{opacity:.3},lineStyle:{width:2}}]})),g.value&&(c=v(g.value),c.setOption({tooltip:{trigger:"axis",formatter:"{b}<br />Usage: {c}%"},grid:{left:"3%",right:"4%",bottom:"20%",top:"15%",containLabel:!0},xAxis:{type:"category",data:[],axisLabel:{interval:1,rotate:0}},yAxis:{type:"value",min:0,max:100,interval:20,axisLabel:{formatter:"{value}%"}},series:[{name:"Memory Usage",type:"line",data:[],smooth:!0,areaStyle:{opacity:.3},lineStyle:{width:2}}]})),x.value&&(u=v(x.value),u.setOption({tooltip:{trigger:"axis",formatter:"{b}<br />Usage: {c}%"},grid:{left:"3%",right:"4%",bottom:"20%",top:"15%",containLabel:!0},xAxis:{type:"category",data:[],axisLabel:{interval:1,rotate:0}},yAxis:{type:"value",min:0,max:100,interval:20,axisLabel:{formatter:"{value}%"}},series:[{name:"Disk Usage",type:"line",data:[],smooth:!0,areaStyle:{opacity:.3},lineStyle:{width:2}}]})),b.value&&(p=v(b.value),p.setOption({tooltip:{trigger:"axis",formatter:function(e){const a=e[0].axisValue,i=e[0].value,n=e[1].value;return`${a}<br />Upload: ${i.toFixed(2)}MB/s<br />Download: ${n.toFixed(2)}MB/s`}},legend:{data:["Upload","Download"]},grid:{left:"3%",right:"4%",bottom:"20%",top:"15%",containLabel:!0},xAxis:{type:"category",data:[],axisLabel:{interval:1,rotate:0}},yAxis:{type:"value",min:0,max:10,interval:2,axisLabel:{formatter:"{value}MB/s"}},series:[{name:"Upload",type:"line",data:[],smooth:!0,areaStyle:{opacity:.3},lineStyle:{width:2}},{name:"Download",type:"line",data:[],smooth:!0,areaStyle:{opacity:.3},lineStyle:{width:2}}]}))},T=e=>{U.value=e.cpu.usage,S.value=e.cpu.temp,L.value=e.memory.used,A.value=e.memory.total,B.value=e.disk.used,C.value=e.disk.total,D.value=e.network.upload,O.value=e.network.download,f.value=e.cpu.history,y.value=e.memory.history,_.value=e.disk.history,m.value=e.network.history.map(a=>({time:new Date(a.time).toLocaleTimeString(),value:a.upload,upload:a.upload,download:a.download})),d&&d.setOption({xAxis:{data:f.value.map(a=>a.time)},series:[{data:f.value.map(a=>a.value)}]}),c&&c.setOption({xAxis:{data:y.value.map(a=>a.time)},series:[{data:y.value.map(a=>a.value)}]}),u&&u.setOption({xAxis:{data:_.value.map(a=>a.time)},series:[{data:_.value.map(a=>a.value)}]}),p&&p.setOption({xAxis:{data:m.value.map(a=>a.time)},series:[{name:"Upload",data:m.value.map(a=>a.upload)},{name:"Download",data:m.value.map(a=>a.download)}]})};let w=null;return G(async()=>{M();try{const e=await H({});e.data&&T(e.data)}catch(e){console.error("Failed to fetch monitor data:",e),N.error("Failed to load system monitoring data")}w=window.setInterval(async()=>{try{const e=await H({});e.data&&T(e.data)}catch(e){console.error("Failed to fetch monitor data:",e)}},6e4)}),R(()=>{w&&clearInterval(w),d==null||d.dispose(),c==null||c.dispose(),u==null||u.dispose(),p==null||p.dispose()}),(e,a)=>{const i=k("a-card"),n=k("a-col"),F=k("a-row");return P(),$("div",E,[o(F,{gutter:[16,16],class:"monitoring-cards"},{default:l(()=>[o(n,{span:8},{default:l(()=>[o(i,{title:"国标设备",bordered:!1,class:"stats-card"},{default:l(()=>a[0]||(a[0]=[t("div",{class:"stats"},[t("div",{class:"stat-item"},[t("span",{class:"label"},"设备总数"),t("span",{class:"value"},"100")]),t("div",{class:"stat-item"},[t("span",{class:"label"},"在线设备"),t("span",{class:"value"},"100")])],-1)])),_:1})]),_:1}),o(n,{span:8},{default:l(()=>[o(i,{title:"部标终端",bordered:!1,class:"stats-card"},{default:l(()=>a[1]||(a[1]=[t("div",{class:"stats"},[t("div",{class:"stat-item"},[t("span",{class:"label"},"终端总数"),t("span",{class:"value"},"100")]),t("div",{class:"stat-item"},[t("span",{class:"label"},"在线终端"),t("span",{class:"value"},"100")])],-1)])),_:1})]),_:1}),o(n,{span:8},{default:l(()=>[o(i,{title:"CPU Usage",bordered:!1,class:"stats-card"},{default:l(()=>[t("div",q,[t("div",z,[t("div",{ref_key:"cpuChart",ref:h,style:{height:"100%"}},null,512)]),t("div",I,[t("span",null,"Usage: "+r(U.value)+"%",1),t("span",null,"Temperature: "+r(S.value)+"°C",1)])])]),_:1})]),_:1}),o(n,{span:8},{default:l(()=>[o(i,{title:"Memory Usage",bordered:!1,class:"stats-card"},{default:l(()=>[t("div",J,[t("div",Q,[t("div",{ref_key:"memoryChart",ref:g,style:{height:"100%"}},null,512)]),t("div",W,[t("span",null,"Used: "+r(L.value)+"GB",1),t("span",null,"Total: "+r(A.value)+"GB",1)])])]),_:1})]),_:1}),o(n,{span:8},{default:l(()=>[o(i,{title:"Disk Usage",bordered:!1,class:"stats-card"},{default:l(()=>[t("div",X,[t("div",Y,[t("div",{ref_key:"diskChart",ref:x,style:{height:"100%"}},null,512)]),t("div",Z,[t("span",null,"Used: "+r(B.value)+"GB",1),t("span",null,"Total: "+r(C.value)+"GB",1)])])]),_:1})]),_:1}),o(n,{span:8},{default:l(()=>[o(i,{title:"Network Traffic",bordered:!1,class:"stats-card"},{default:l(()=>[t("div",tt,[t("div",at,[t("div",{ref_key:"networkChart",ref:b,style:{height:"100%"}},null,512)]),t("div",et,[t("span",null,"Upload: "+r(D.value)+"KB/s",1),t("span",null,"Download: "+r(O.value)+"KB/s",1)])])]),_:1})]),_:1})]),_:1})])}}}),dt=j(st,[["__scopeId","data-v-957ac5d9"]]);export{dt as default};
